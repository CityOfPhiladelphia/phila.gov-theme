!function(a){function b(a){return String(a).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}var c=function(a){var b,c,d={};if(""===a)return{};for(b=0;b<a.length;b+=1)c=a[b].split("="),2===c.length&&(d[c[0]]=decodeURIComponent(c[1].replace(/\+/g," ")));return d};a.queryParams=function(){return c(window.location.search.substr(1).split("&"))},a.hashParams=function(){return c(window.location.hash.substr(1).split("&"))},window.Swiftype=window.Swiftype||{},Swiftype.root_url=Swiftype.root_url||"https://api.swiftype.com",Swiftype.pingUrl=function(a,b){var c=setTimeout(b,350),d=new Image;return d.onload=d.onerror=function(){clearTimeout(c),b()},d.src=a,!1},Swiftype.pingSearchResultClick=function(b,c,d){var e={t:(new Date).getTime(),engine_key:b,doc_id:c,q:Swiftype.currentQuery},f=Swiftype.root_url+"/api/v1/public/analytics/pc?"+a.param(e);Swiftype.pingUrl(f,d)},a.fn.swiftypeSearch=function(b){var b=a.extend({},a.fn.swiftypeSearch.defaults,b);return this.each(function(){var c=a(this),d=a.meta?a.extend({},b,c.data()):b;c.data("swiftype-config-search",d),c.selectedCallback=function(b){return function(c){var e=a(this);c.preventDefault(),Swiftype.pingSearchResultClick(d.engineKey,b.id,function(){d.onComplete(e)})}},c.registerResult=function(b,d){b.data("swiftype-item",d),a("a",b).click(c.selectedCallback(d))},c.getContentCache=function(){return a("#"+g)};var e=a(d.resultContainingElement),f=e.html(),g="st-content-cache",h=c.getContentCache(),i=function(a,b){location.hash="stq="+encodeURIComponent(a)+"&stp="+b},j=function(b,c){function i(a){if(void 0!==a){var b=a;return"function"==typeof b&&(b=b.call()),b}return void 0}c=a.extend({page:1},c);var j={};h.length||(e.after("<div id='"+g+"' style='display: none;'></div>"),h.html(f).hide()),d.loadingFunction(b,e),Swiftype.currentQuery=b,j.q=b,j.engine_key=d.engineKey,j.page=c.page,j.per_page=i(d.perPage),j.search_fields=i(d.searchFields),j.fetch_fields=i(d.fetchFields),j.facets=i(d.facets),j.filters=i(d.filters),j.document_types=i(d.documentTypes),j.functional_boosts=i(d.functionalBoosts),j.sort_field=i(d.sortField),j.sort_direction=i(d.sortDirection),j.spelling=i(d.spelling),a.getJSON(Swiftype.root_url+"/api/v1/public/engines/search.json?callback=?",j).success(l)};a(window).hashchange(function(){var b=a.hashParams();if(b.stq)j(b.stq,{page:b.stp});else{var d=c.getContentCache();d.length&&(e.html(d.html()),d.remove())}});var k=c.parents("form");k&&k.bind("submit",function(a){a.preventDefault();var b=c.val();i(b,1)}),a(document).on("click","[data-hash][data-page]",function(b){b.preventDefault();var c=a(this);i(a.hashParams().stq,c.data("page"))}),a(document).on("click","[data-hash][data-spelling-suggestion]",function(b){b.preventDefault();var c=a(this);i(c.data("spelling-suggestion"),1)});var l=function(a){"function"==typeof d.preRenderFunction&&d.preRenderFunction.call(c,a),d.renderResultsFunction(c.getContext(),a),"function"==typeof d.postRenderFunction&&d.postRenderFunction.call(c,a)};c.getContext=function(){return{config:d,resultContainer:e,registerResult:c.registerResult}},a(window).hashchange()})};var d=function(b,c){var d,e=-1,f=b.config;a.each(c,function(a,b){b.num_pages>e&&(d=a,e=b.num_pages)});var g=c[d].current_page,h=c[d].num_pages;a(f.renderPaginationForType(d,g,h)).appendTo(b.resultContainer)},e=function(b,c){var e=b.resultContainer,f=b.config;e.html(""),a.each(c.records,function(c,d){a.each(d,function(d,g){b.registerResult(a(f.renderFunction(c,g)).appendTo(e),g)})}),d(b,c.info)},f=function(a,c){return'<div class="st-result"><h3 class="title"><a href="'+c.url+'" class="st-search-result-link">'+b(c.title)+"</a></h3></div>"},g=function(a,b){b.html('<p class="st-loading-message">loading...</p>')},h=function(a){window.location=a.attr("href")},i=function(b){var c=0,d=this.getContext().resultContainer,e=null;b.info&&a.each(b.info,function(a,b){c+=b.total_result_count,b.spelling_suggestion&&(e=b.spelling_suggestion.text)}),0===c&&d.html("<div id='st-no-results' class='st-no-results'>No results found.</div>"),null!==e&&d.append('<div class="st-spelling-suggestion">Did you mean <a href="#" data-hash="true" data-spelling-suggestion="'+e+'">'+e+"</a>?</div>")},j=function(a,b,c){var d,e,f='<div class="st-page">';return 1!=b&&(d=b-1,f=f+'<a href="#" class="st-prev" data-hash="true" data-page="'+d+'">&laquo; previous</a>'),c>b&&(e=b+1,f=f+'<a href="#" class="st-next" data-hash="true" data-page="'+e+'">next &raquo;</a>'),f+="</div>"};a.fn.swiftypeSearch.defaults={attachTo:void 0,documentTypes:void 0,facets:void 0,filters:void 0,engineKey:void 0,searchFields:void 0,functionalBoosts:void 0,sortField:void 0,sortDirection:void 0,fetchFields:void 0,preRenderFunction:void 0,postRenderFunction:i,loadingFunction:g,renderResultsFunction:e,renderFunction:f,renderPaginationForType:j,onComplete:h,perPage:10,spelling:"strict"}}(jQuery),function(a){if("function"==typeof require&&"object"==typeof exports&&"object"==typeof module){var b=require("jquery");module.exports=a(b)}else if("function"==typeof define&&define.amd)define(["jquery"],function(b){return a(b)});else{var c;try{c=(!1||eval)("this")}catch(d){c=window}c.deparam=a(jQuery)}}(function(a){var b=function(a,b){var c={},d={"true":!0,"false":!1,"null":null};return a.replace(/\+/g," ").split("&").forEach(function(a){var e,f=a.split("="),g=decodeURIComponent(f[0]),h=c,i=0,j=g.split("]["),k=j.length-1;if(/\[/.test(j[0])&&/\]$/.test(j[k])?(j[k]=j[k].replace(/\]$/,""),j=j.shift().split("[").concat(j),k=j.length-1):k=0,2===f.length)if(e=decodeURIComponent(f[1]),b&&(e=e&&!isNaN(e)&&+e+""===e?+e:"undefined"===e?void 0:void 0!==d[e]?d[e]:e),k)for(;k>=i;i++)g=""===j[i]?h.length:j[i],h=h[g]=k>i?h[g]||(j[i+1]&&isNaN(j[i+1])?{}:[]):e;else"[object Array]"===Object.prototype.toString.call(c[g])?c[g].push(e):{}.hasOwnProperty.call(c,g)?c[g]=[c[g],e]:c[g]=e;else g&&(c[g]=b?void 0:"")}),c};return a.prototype.deparam=a.deparam=b,b}),function(){var a=navigator.userAgent.toLowerCase().indexOf("webkit")>-1,b=navigator.userAgent.toLowerCase().indexOf("opera")>-1,c=navigator.userAgent.toLowerCase().indexOf("msie")>-1;(a||b||c)&&document.getElementById&&window.addEventListener&&window.addEventListener("hashchange",function(){var a=document.getElementById(location.hash.substring(1));a&&(/^(?:a|select|input|button|textarea)$/i.test(a.tagName)||(a.tabIndex=-1),a.focus())},!1)}(),function(a){function b(){var b=a.deparam(location.hash.substr(1));g.val(b.stq)}var c='<article><header class="search-entry-header"><h2 class="entry-title">';c+='<a href="{{&url}}" rel="bookmark">{{title}}</a></h2></header>',c+='<div class="entry-summary">{{&summary}}</div></article><hr>';var d=function(a,b){var d={url:encodeURI(b.url),title:b.title,summary:b.highlight.body||(b.body.length>300?b.body.substring(0,300)+"...":b.body)};return Mustache.render(c,d)},e=a("#result-count"),f=function(b){var c=0,d=this.getContext().resultContainer,f=null;b.info&&a.each(b.info,function(a,b){c+=b.total_result_count,b.spelling_suggestion&&(f=b.spelling_suggestion.text)}),0===c?e.text("No results found"):e.html("Found <b>"+c+"</b> results"),null!==f&&d.append('<div class="st-spelling-suggestion">Did you mean <a href="#" data-hash="true" data-spelling-suggestion="'+f+'">'+f+"</a>?</div>")},g=a("#st-search-input");g.swiftypeSearch({engineKey:SWIFTYPE_ENGINE,resultContainingElement:"#st-results-container",renderFunction:d,postRenderFunction:f}),a("#search-form").submit(function(b){b.preventDefault(),window.location.href="/search#stq="+a(this).find(".search-field").val()}),b()}(jQuery),new List("filter-list",{valueNames:["item","item-desc"]});
//# sourceMappingURL=phila-scripts.min.js.map